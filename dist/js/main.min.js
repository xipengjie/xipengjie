$(function(){$.getJSON("http://datainfo.duapp.com/shopdata/getCar.php?callback=?",{userID:$.cookie("username")},function(s){for(var t="",a=0;a<s.length;a++)t+="<tr class='"+s[a].goodsID+"'><td class='cart_r0'><input type='checkbox' class='checkbox_c' checked='checkbox'></td><td class='cart_r1 zd_t2'><a href='#' ><img src="+s[a].goodsListImg+" ></a></td><td class='zd_t3'><a href='detail.html?id="+s[a].goodsID+"' >"+s[a].goodsName+"</a></td><td class='cart_r3 zd_t4'>￥<span>"+s[a].price+"</span></td><td class='zd_t5'>-</td><td class='cart_r4'><div><span class='cart_jia'>+</span><input type='text' value='"+s[a].number+"' id='cart_sl'><span class='cart_jian'>-</span></div></td><td class='cart_r5 zd_t7' ><a href='#'>删除</a></td><td class='cart_r6'></td></tr>","";function n(){for(var s=0,t=0,a=0;a<$(".cart_table>tbody>tr").length;a++)$(".checkbox_c").eq(a).prop("checked")&&(t+=Number($("tr").eq(a).find("#cart_sl").val()),s+=parseInt(Number($("tr").eq(a).find(".zd_t4").find("span").html())*Number($("tr").eq(a).find("#cart_sl").val())));$(".zjjg").text(s),$(".zjsl").html(t)}$(".cart_table tbody").html(t),$("#checkbox").on("click",function(){$(".checkbox_c").prop("checked",$(this).prop("checked")),n()}),$(".checkbox_c").click(function(){n(),$(".checkbox_c:checked").length==$(".checkbox_c").length?$("#checkbox").prop("checked",!0):$("#checkbox").prop("checked",!1)}),n(),$(".cart_jia").on("click",function(){var s=$(this).next("#cart_sl"),t=s.val();t=parseInt(t,10),t+=1,s.val(t),n();var a=$(this).parent().parent().parent().attr("class"),o=t;$.get("http://datainfo.duapp.com/shopdata/updatecar.php",{userID:$.cookie("username"),goodsID:a,number:o},function(s){console.log(s)})}),$(".cart_jian").on("click",function(){var s=$(this).prev("#cart_sl"),t=s.val();0<(t=parseInt(t,10))&&(t-=1,s.val(t),n());var a=$(this).parent().parent().parent().attr("class");console.log(a);var o=t;$.get("http://datainfo.duapp.com/shopdata/updatecar.php",{userID:$.cookie("username"),goodsID:a,number:o},function(s){console.log(s)})}),$(".zd_t7>a").on("click",function(){var s=$(this).parent().parent().attr("class");$.get("http://datainfo.duapp.com/shopdata/updatecar.php",{userID:$.cookie("username"),goodsID:s,number:0},function(s){console.log(s)}),$(this).parent().parent().css("display","none")})})}),$(function(){var s=location.search.split("=")[1];$.getJSON("http://datainfo.duapp.com/shopdata/getGoods.php?callback=?",{goodsID:s},function(s){var t="<img src="+s[0].goodsListImg+" >",a="<img src="+s[0].goodsListImg+" >";$(".detail_img").html(a),$("#right").html(t);var o="<p class='detail_p'>"+s[0].goodsName+"</p>";$(".detail_title").html(o);var n="<p class='detail_price'><span>活动价￥</span>"+s[0].price+"</p>";$(".detail_price_box").html(n);$("#detail_right>form").html("<input type='button' class='detail_btn2' value='立即购买'><input type='button' class='detail_btn' value='加入购物车'>"),$(".detail_btn").click(function(){$.get("http://datainfo.duapp.com/shopdata/updatecar.php",{userID:$.cookie("username"),goodsID:s[0].goodsID},function(s){console.log(s),0==s&&alert("添加失败"),1==s&&alert("添加成功")})})})}),$(function(){$(".app_q").mouseover(function(){$(".app1").removeClass("app_ewm2").addClass("app_ewm"),$(".app2").removeClass("app_ewm2").addClass("app_ewm"),$(".app_QR").css("display","block")}),$(".app_q").mouseout(function(){$(".app1").removeClass("app_ewm").addClass("app_ewm2"),$(".app2").removeClass("app_ewm").addClass("app_ewm2"),$(".app_QR").css("display","none")});var s=$(".lb li").size(),t=0;setInterval(function(){++t==s&&(t=0);$(".lb li").eq(t).fadeIn(500).siblings().fadeOut(500),$(".lb_jy li").eq(t).addClass("lb_jy_color").siblings().removeClass(),$(".lb_jy li").mousemove(function(){$(this).addClass("lb_jy_color").siblings().removeClass();var s=$(this).index();t=s,$(".lb li").eq(s).fadeIn(500).siblings().fadeOut(500)})},2e3);$(".tp_cb_a").hover(function(){$(this).find("img").animate({opacity:1},200)},function(){$(this).find("img").animate({opacity:.7},200)}),$(".dztj_head_right").click(function(){$(".dztj_box ul").removeClass().addClass("a")}),$(".dztj_head_left").click(function(){$(".dztj_box ul").removeClass().addClass("b")}),$(".du li").hover(function(){$(this).removeClass("de2").addClass("de")},function(){$(this).removeClass("de").addClass("de2")}),$(".mt_left a").hover(function(){$(this).removeClass("de2").addClass("de")},function(){$(this).removeClass("de").addClass("de2")}),$(window).scroll(function(){700<=$(window).scrollTop()?$("#home_top").css("display","block"):$("#home_top").css("display","none")}),$(".yc_nav_d").hover(function(){$(this).find(".yc_bg_js").css("background","#c40000"),$(this).find(".yc_zt_js").css("color","white"),$(this).find(".yc_dh_js").stop().animate({right:"30px",opacity:"1"},400).css("display","block")},function(){$(this).find(".yc_bg_js").css("background","#eaeaea"),$(this).find(".yc_zt_js").css("color","#c40000"),$(this).find(".yc_dh_js").stop().animate({right:"80px",opacity:"0"},400)}),$("#seek_txt").on("input",function(){var s="https://suggest.taobao.com/sug?code=utf-8&q="+$(this).val()+"&k=1&area=c2c&bucketid=18",a="";$.ajax(s,{type:"post",dataType:"jsonp",crossDomain:!0,success:function(s){for(var t=0;t<s.result.length;t++)a+="<li><a href='#'>"+s.result[t][0]+"</a></li>";$("#sousuo").html(a)}})}),$.get("http://datainfo.duapp.com/shopdata/getclass.php?callback=?",function(s){for(var t="",a="",o="",n=(s=JSON.parse(s),3);n<s.length;n++)t+="<li><a href='list.html?classID="+s[n].classID+"' class='nav_list_sub_a'>"+s[n].className+"</a><span>&#xe65f;</span><ul class='nav_list_sub_b'></ul></li>";$(".nav_list_sub").html(t);for(var i=0;i<s.length;i++)a+="<li><a href='list.html?classID="+s[i].classID+"'>"+s[i].className+"</a></li>";for(var l=s.length-1;0<l;l--)o+="<li><a href='list.html?classID="+s[l].classID+"'>"+s[l].className+"</a></li>";$(".nav_list_sub_b:odd").html(a),$(".nav_list_sub_b:even").html(o),$(".nav_list_sub li").on("mouseover",function(){console.log($(this).find(".nav_list_sub_b:odd")),$(this).find(".nav_list_sub_b:even").show().css("display","block"),$(this).find(".nav_list_sub_b:odd").show().css("display","block"),$(this).on("mouseout",function(){$(this).find(".nav_list_sub_b").hide().css("display","none")})})}),$("#seek_txt2").on("input",function(){var s="https://suggest.taobao.com/sug?code=utf-8&q="+$(this).val()+"&k=1&area=c2c&bucketid=18",a="";$.ajax(s,{type:"post",dataType:"jsonp",crossDomain:!0,success:function(s){for(var t=0;t<s.result.length;t++)a+="<li><a href='#'>"+s.result[t][0]+"</a></li>";$("#sousuo2").html(a)}})})}),$(function(){$(".nav_list_all").on("mouseover",function(){$(this).find(".nav_list_sub").css("display","block"),$(this).on("mouseout",function(){$(this).find(".nav_list_sub").css("display","none")})});var s=location.search.split("=")[1];$.getJSON("http://datainfo.duapp.com/shopdata/getGoods.php?callback=?",{classID:s},function(s){for(var t="",a=0;a<s.length;a++)t+="<li class='shangpin'><a href='detail.html?id="+s[a].goodsID+"'><img src='"+s[a].goodsListImg+"'/><span>"+s[a].goodsName+"</span><strong>￥"+s[a].price+"</strong><button>加入购物车</button>";$("#product-list").html(t)})}),$(function(){$(".logging_right_btn").on("click",function(){$.get("http://datainfo.duapp.com/shopdata/userinfo.php",{status:"login",userID:$(".logging_right_yx_a").val(),password:$(".logging_right_psw_a").val()},function(s){s=JSON.parse(s),console.log(s),0==s?$(".logging_right_yx").append('<span class="i">用户名不存在</span>'):2==s?$(".logging_right_psw").append('<span class="i">密码错误</span>'):($(".logging_right_psw span").replaceWith(""),$.cookie("username",s.userID,{expires:7,path:"/"}),location.href="index.html")})}),$(".logging_right_yx input").on("blur",function(){$(".logging_right_yx").removeClass("f")}),$(".logging_right_yx input").on("focus",function(){$(".logging_right_yx").addClass("f")}),$(".logging_right_psw input").on("blur",function(){$(".logging_right_psw").removeClass("f")}),$(".logging_right_psw input").on("focus",function(){$(".logging_right_psw").addClass("f")})}),$(function(){$(".login_sjh input").on("blur",function(){$(".login_sjh").removeClass("f");var s=$(this).val();/^[1][3,4,5,7,8][0-9]{9}$/.test(s)?($(".login_sjh div").replaceWith('<strong class="sjh_zz2"></strong>'),$(".login_sjh").append('<strong class="sjh_zz2"></strong>'),$(".login_sjh").addClass("j")):($(".login_sjh").append('<div class="sjh_zz"><em></em>请输入正确的手机号</div>'),$(".login_sjh strong").replaceWith('<div class="sjh_zz"><em></em>请输入正确的手机号</div>'),$(".login_sjh").removeClass("j"))}),$(".login_sjh input").on("focus",function(){$(".login_sjh").addClass("f")}),$(".login_szmm input").on("blur",function(){$(".login_szmm").removeClass("f");var s=$(this).val();/^[0-9A-Za-z]{6,20}$/.test(s)?($(".login_szmm div").replaceWith('<strong class="sjh_zz2"></strong>'),$(".login_szmm").append('<strong class="sjh_zz2"></strong>'),$(".login_szmm").addClass("j")):($(".login_szmm").append('<div class="sjh_zz"><em></em>请输入正确的密码格式</div>'),$(".login_szmm strong").replaceWith('<div class="sjh_zz"><em></em>请输入正确的密码格式</div>'),$(".login_szmm").removeClass("j"))}),$(".login_szmm input").on("focus",function(){$(".login_szmm").addClass("f")}),$(".login_qrmm input").on("focus",function(){$(".login_qrmm").addClass("f")}),$(".login_qrmm input").on("blur",function(){$(".login_qrmm").removeClass("f"),$(this).val()!=$(".login_szmm input").val()?($(".login_qrmm").append('<div class="sjh_zz"><em></em>请输入相同的密码</div>'),$(".login_qrmm strong").replaceWith('<div class="sjh_zz"><em></em>请输入相同的密码</div>')):($(".login_qrmm div").replaceWith('<strong class="sjh_zz2"></strong>'),$(".login_qrmm").append('<strong class="sjh_zz2"></strong>'))}),$(".login_btn").on("click",function(){$.get("http://datainfo.duapp.com/shopdata/userinfo.php",{status:"register",userID:$(".login_sjh input").val(),password:$(".login_szmm input").val()},function(s){0==(s=JSON.parse(s))?$(".login_sjh").append("<span class='login_sjh_q'>手机号已注册</span>"):1==s?location.href="login.html":alert("注册失败，请重试")})})});